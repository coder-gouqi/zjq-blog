<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>登录页面</title>
    <script th:src="@{/js/jquery.min.js}"></script>
    <link rel="stylesheet" th:href="@{/css/common.css}">
    <link rel="stylesheet" th:href="@{/css/login.css}">
</head>
<body>

<!-- 导航栏 -->
<div class="nav">
    <img th:src="@{/image/avatar.jpg}">
    <span class="title">枸杞的博客</span>

    <!--    这个标签仅仅用于占位 ,把下面几个a 标签挤到右边-->
    <div class="spacer"></div>

    <a th:href="@{/list}">主页</a>
</div>

<!--
    正文部分
    这个 login-container 是贯穿整个页面的容器
-->
<div class="login-container">
    <!-- 垂直水平居中的登录对话框    -->
    <div class="login-dialog">
        <h3>登录</h3>
        <div class="row">
            <span>用户名</span>
            <input type="text" id="userAccount" placeholder="输入用户名">
        </div>
        <div class="row">
            <span>密码</span>
            <input type="password" id="userPassword" placeholder="输入密码">
        </div>
        <div class="row">
            <button id="submit" type="button">提交</button>
        </div>
        <div class="row">
            <button id="insert" type="button">注册</button>
        </div>
    </div>
</div>
</body>
<script>
    $("#submit").click(function () {
        let account = document.getElementById("userAccount").value;
        let password = document.getElementById("userPassword").value;
        let params = {
            userAccount: account,
            userPassword: password
        }
        $.ajax({
            url: "http://127.0.0.1:8080/login",
            type: "post",
            data: JSON.stringify(params),
            contentType: 'application/json',
            success: function (res) {
                // 只有请求成功（状态码为200）才会执行这个函数

                console.log(res.data)
            },
            error: function (xhr) {
                // 只有请求不正常（状态码不为200）才会执行
                console.log('error', xhr);
            },
        })
    })

    $("#insert").click(function () {
        let account = document.getElementById("userAccount").value;
        let password = document.getElementById("userPassword").value;
        let params = {
            userAccount: account,
            userPassword: password
        }
        $.ajax({
            url: "http://127.0.0.1:8080/register",
            type: "post",
            data: JSON.stringify(params),
            contentType: 'application/json',
            success: function (res) {
                // 只有请求成功（状态码为200）才会执行这个函数
                alert("注册成功")
            },
            error: function (xhr) {
                // 只有请求不正常（状态码不为200）才会执行
                console.log('error', xhr);
            },
        })
    })
</script>
</html>
