<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>博客详情页</title>
    <script th:src="@{/js/jquery.min.js}"></script>
    <link rel="stylesheet" th:href="@{/css/common.css}">
    <link rel="stylesheet" th:href="@{/css/blog_detail.css}">
</head>
<body>

<!-- 导航栏 -->
<div class="nav">
    <img th:src="@{/image/avatar.jpg}">
    <span class="title">枸杞的博客</span>

    <!--    这个标签仅仅用于占位 ,把下面几个a 标签挤到右边-->
    <div class="spacer"></div>

    <a th:href="@{/list}">主页</a>
    <a th:href="@{/edit}">写博客</a>
    <a th:href="@{/logout}">注销</a>
</div>

<!-- 页面主体部分 -->
<div class="container">
    <!--    左侧信息-->

    <div class="container-left">

        <!--        使用 这个 .card 表示用户信息-->
        <div class="card">
            <img th:src="@{/image/avatar.jpg}" alt="图片显示失败">
            <!--            用户名-->
            <h3>程序员枸杞</h3>
            <a th:href="@{https://gitee.com/zh-jiaqi}" target="_blank">Gitee 地址</a>
            <div class='counter'>
                <span>文章</span>
                <span>分类</span>
            </div>
            <div class="counter">
                <span th:utext="${essayCount}"></span>
                <span>2</span>
            </div>
        </div>
    </div>

    <!--    右侧信息-->
    <div class="container-right">

        <!-- 博客标题 -->
        <h3 class="title" th:utext="${essay.title}">我的第一篇博客</h3>

        <h4 class="title" th:utext="${essay.userId}">作者</h4>
        <div id="userId" th:text="${user.id}" style="display: none"></div>
        <div id="essayId" th:text="${essay.userId}" style="display: none"></div>


        <!-- 博客发布时间-->
        <div class="date"
             th:utext="${essay.createTime}+'<p>点赞数：'+${essay.thumbNum}+'转发数：'+${essay.forwardNum}+'收藏数：'+${essay.favourNum}+'</p>'">
        </div>
        <!-- 博客正文 -->
        <div class="content">
            <p th:utext="${essay.content}"></p>
            <button id="thumb">点赞</button>
            <button id="forward">转发</button>
            <button id="favour">收藏</button>
        </div>
        <div class="comment-container">
            <h3>评论区</h3>
            <hr>
            <textarea id="comment" class="mo-textarea"></textarea>
            <button id="add" type="button">发送</button>
        </div>
        <div id="commend">
        </div>
    </div>
</div>
</body>
<script>
    $("#thumb").click(function () {
        let userId = document.getElementById("userId").innerText
        let essayId = document.getElementById("essayId").innerText
        console.log(userId)
        let params = {
            userId: userId,
            essayId: essayId,
        }
        let host = "http://localhost:8080"
        $.ajax({
            url: host + "/thumb/update",
            method: "post",
            data: JSON.stringify(params),
            contentType: 'application/json',
            success: function (result) {//result为返回结果
                console.log("成功")
                alert("点赞成功")
            },
            error: function () {//运行错误会执行此方法
                console.log("失败")
            }
        })
    })
    $("#forward").click(function () {
        let userId = document.getElementById("userId").innerText
        let essayId = document.getElementById("essayId").innerText
        console.log(userId)
        let params = {
            userId: userId,
            essayId: essayId,
        }
        let host = "http://localhost:8080"
        $.ajax({
            url: host + "/forward/update",
            method: "post",
            data: JSON.stringify(params),
            contentType: 'application/json',
            success: function (result) {//result为返回结果
                console.log("成功")
                alert("转发成功")
            },
            error: function () {//运行错误会执行此方法
                console.log("失败")
            }
        })
    })
    $("#favour").click(function () {
        let userId = document.getElementById("userId").innerText
        let essayId = document.getElementById("essayId").innerText
        console.log(userId)
        let params = {
            userId: userId,
            essayId: essayId,
        }
        let host = "http://localhost:8080"
        $.ajax({
            url: host + "/favour/update",
            method: "post",
            data: JSON.stringify(params),
            contentType: 'application/json',
            success: function (result) {//result为返回结果
                console.log("成功")
                alert("收藏成功")
            },
            error: function () {//运行错误会执行此方法
                console.log("失败")
            }
        })
    })
</script>
</html>




